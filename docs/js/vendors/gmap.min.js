!function(i,a){function n(a,t){var e=this,n=(e.it=a,t=e.options=t||{},e.data=i(a).data("gmap")||{}),o=e.defaults=p;e.settings=i.extend(!0,{},o,t,n),e.map={},e.checkScript()}var p={api:"",lang:"ru",styles:[],markerDefaults:{},center:{lat:51.61801655,lng:54.93164063},zoom:16,disableDefaultUI:!0,markers:[]},t=n.prototype;t.loadMap=function(){var n,a=this,t=a.it,o=a.settings;a.map=n=new google.maps.Map(t,o),i.each(o.markers,function(a,t){var e=i.extend(!0,{},o.markerDefaults,t,{map:n});new google.maps.Marker(e)}),google.maps.event.addListenerOnce(n,"idle",function(){i(t).trigger("mapLoaded.gmap",[a,this])})},t.checkScript=function(){var a=this,t=a.settings,e=i('script[src="https://maps.googleapis.com/maps/api/js?key='+t.api+"&language="+t.lang+'"]');e.length&&"object"==typeof google&&"maps"in google?a.loadMap():e.length&&"object"!=typeof google?e.on("load",function(){a.loadMap.call(a)}):a.loadScript(t.api,function(){a.loadMap.call(a)})},t.loadScript=function(a,t){var e=this.settings,n=i("<script/>").attr("src","https://maps.googleapis.com/maps/api/js?key="+a+"&language="+e.lang);n.on("load",function(){t&&"function"==typeof t&&t()}),i("body").get(0).appendChild(n.get(0))},i.fn.gMap=function(e){return i.each(this,function(a,t){i(t);t.gMap=new n(t,e)}),this},n.defaults=p,a.GMap=n}(jQuery,window);